<%- include('partials/header') %>
<main>
    <div class="course-header">
        <h1><%= course.name %></h1>
        <p class="course-meta">
            <%= course.courseCode %> â€¢ <%= course.creditHours %> credits
        </p>

        <% if (course.description) { %>
            <p class="course-description"><%= course.description %></p>
        <% } %>
    </div>

    <div class="sections">
        <div class="sections-header">
            <h2>Available Sections</h2>

            <div class="sort-options">
                <span>Sort by: </span>

                <a href="/catalog/<%= course.slug || course.courseCode %>"
                   class="<%= currentSort === 'time' ? 'active' : '' %>">Time</a>

                <a href="/catalog/<%= course.slug || course.courseCode %>?sort=professor"
                   class="<%= currentSort === 'professor' ? 'active' : '' %>">Professor</a>

                <a href="/catalog/<%= course.slug || course.courseCode %>?sort=room"
                   class="<%= currentSort === 'room' ? 'active' : '' %>">Room</a>
            </div>
        </div>

        <div class="section-list">

            <% if (!sections || sections.length === 0) { %>
                <p>No sections are currently scheduled for this course.</p>
            <% } else { %>
                <% sections.forEach(section => { %>
                    <div class="section-card">
                        <div class="section-time"><%= section.time %></div>
                        <div class="section-room">Room: <%= section.room %></div>

                        <div class="section-professor">
                            Instructor:
                            <% if (section.professorSlug) { %>
                                <a href="/faculty/<%= section.professorSlug %>"><%= section.professor %></a>
                            <% } else { %>
                                <%= section.professor %>
                            <% } %>
                        </div>
                    </div>
                <% }) %>
            <% } %>

        </div>
    </div>

    <div class="navigation">
        <p><a href="/catalog">&larr; Back to Course Catalog</a></p>
    </div>
</main>
<%- include('partials/footer') %>
